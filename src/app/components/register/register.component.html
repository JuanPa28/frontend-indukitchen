<div class="register-wrap">
  <div class="register-shell">
    <header class="register-header text-center">
      <div class="avatar">
        <i class="fas fa-user-plus" aria-hidden="true"></i>
      </div>
      <h1 class="title">Crear Cuenta</h1>
      <p class="subtitle">Únete a <strong>InduKitchen</strong> y descubre los mejores productos</p>
    </header>

    <main class="card">
      <form (ngSubmit)="onSubmit()" class="register-form" novalidate>
        <div class="form-alert success" *ngIf="successMessage" role="alert">
          <i class="fas fa-check-circle"></i>
          <span>{{ successMessage }}</span>
        </div>

        <section class="section">
          <div class="section-header">
            <i class="fas fa-user"></i>
            <h2>Información Personal</h2>
          </div>

          <div class="row">
            <div class="col">
              <label class="label" for="name">Nombre *</label>
              <div class="form-field">
                <i class="field-icon fas fa-user" aria-hidden="true"></i>
                <input
                  id="name"
                  type="text"
                  class="field-input"
                  [(ngModel)]="userData.name"
                  name="name"
                  placeholder="Ej: Juan"
                  required
                  aria-required="true"
                />
              </div>
            </div>

            <div class="col">
              <label class="label" for="lastName">Apellido *</label>
              <div class="form-field">
                <i class="field-icon fas fa-user" aria-hidden="true"></i>
                <input
                  id="lastName"
                  type="text"
                  class="field-input"
                  [(ngModel)]="userData.lastName"
                  name="lastName"
                  placeholder="Ej: Pérez"
                  required
                  aria-required="true"
                />
              </div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="section-header">
            <i class="fas fa-envelope"></i>
            <h2>Información de Contacto</h2>
          </div>

          <div class="row">
            <div class="col">
              <label class="label" for="email">Email *</label>
              <div class="form-field">
                <i class="field-icon fas fa-envelope" aria-hidden="true"></i>
                <input
                  id="email"
                  type="email"
                  class="field-input"
                  [(ngModel)]="userData.email"
                  name="email"
                  placeholder="ejemplo@correo.com"
                  required
                  aria-required="true"
                />
              </div>
            </div>

            <div class="col">
              <label class="label" for="phone">Teléfono *</label>
              <div class="form-field">
                <i class="field-icon fas fa-phone" aria-hidden="true"></i>
                <input
                  id="phone"
                  type="tel"
                  class="field-input"
                  [(ngModel)]="userData.phone"
                  name="phone"
                  placeholder="300 1234567"
                  required
                  aria-required="true"
                />
              </div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="section-header">
            <i class="fas fa-id-card"></i>
            <h2>Datos de Identificación</h2>
          </div>

          <div class="row">
            <div class="col">
              <label class="label" for="dni">DNI/Cédula *</label>
              <div class="form-field">
                <i class="field-icon fas fa-id-card" aria-hidden="true"></i>
                <input
                  id="dni"
                  type="text"
                  class="field-input"
                  [(ngModel)]="userData.dni"
                  name="dni"
                  placeholder="123456789"
                  required
                  aria-required="true"
                />
              </div>
            </div>

            <div class="col">
              <label class="label" for="address">Dirección *</label>
              <div class="form-field">
                <i class="field-icon fas fa-home" aria-hidden="true"></i>
                <input
                  id="address"
                  type="text"
                  class="field-input"
                  [(ngModel)]="userData.address"
                  name="address"
                  placeholder="Calle 123 # 45-67"
                  required
                  aria-required="true"
                />
              </div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="section-header">
            <i class="fas fa-lock"></i>
            <h2>Seguridad</h2>
          </div>

          <div class="row">
            <div class="col">
              <label class="label" for="password">Contraseña *</label>
              <div class="form-field has-toggle">
                <i class="field-icon fas fa-lock" aria-hidden="true"></i>
                <input
                  id="password"
                  [type]="showPassword ? 'text' : 'password'"
                  class="field-input"
                  [(ngModel)]="userData.password"
                  name="password"
                  placeholder="Mínimo 6 caracteres"
                  required
                  aria-required="true"
                />
                <button
                  type="button"
                  class="toggle-btn"
                  (click)="togglePasswordVisibility()"
                  aria-label="Mostrar contraseña"
                >
                  <i
                    class="fas"
                    [class.fa-eye]="!showPassword"
                    [class.fa-eye-slash]="showPassword"
                  ></i>
                </button>
              </div>
            </div>

            <div class="col">
              <label class="label" for="confirmPassword">Confirmar Contraseña *</label>
              <div class="form-field has-toggle">
                <i class="field-icon fas fa-lock" aria-hidden="true"></i>
                <input
                  id="confirmPassword"
                  [type]="showConfirmPassword ? 'text' : 'password'"
                  class="field-input"
                  [(ngModel)]="userData.confirmPassword"
                  name="confirmPassword"
                  placeholder="Repite tu contraseña"
                  required
                  aria-required="true"
                />
                <button
                  type="button"
                  class="toggle-btn"
                  (click)="toggleConfirmPasswordVisibility()"
                  aria-label="Mostrar confirmar contraseña"
                >
                  <i
                    class="fas"
                    [class.fa-eye]="!showConfirmPassword"
                    [class.fa-eye-slash]="showConfirmPassword"
                  ></i>
                </button>
              </div>
            </div>
          </div>
        </section>

        <div class="form-alert error" *ngIf="errorMessage" role="alert">
          <i class="fas fa-exclamation-circle"></i>
          <span>{{ errorMessage }}</span>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn primary" [disabled]="isLoading">
            <ng-container *ngIf="!isLoading">
              <i class="fas fa-user-plus"></i> Crear Mi Cuenta
            </ng-container>
            <ng-container *ngIf="isLoading">
              <span class="spinner"></span> Creando cuenta...
            </ng-container>
          </button>
        </div>
      </form>

      <footer class="card-footer text-center">
        <p class="small muted">¿Ya tienes cuenta?</p>
        <a routerLink="/login" class="btn ghost">
          <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
        </a>
      </footer>
    </main>
  </div>
</div>
